#!/bin/bash
 
set -e

if [ "_@XC_EXEC_PREFIX@" == "_wine" ]; then
  # FIXME: octave on wine does not work for some onknown reason
  exit 0
fi

export OPENMBVCPPINTERFACE_PREFIX="@native_prefix@"
@XC_EXEC_PREFIX@ @OCTAVE@ -q $(@XC_PATH_CONVERT@ @abs_srcdir@/octavetest.m) | tee result.txt

diff --ignore-space-change --strip-trailing-cr @abs_srcdir@/result-ref.txt result.txt

diff --ignore-space-change --strip-trailing-cr @abs_srcdir@/../MBS_outfile-ref.ombv.xml MBS_outfile.ombv.xml
